
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://bartolialberto.github.io/CybersecurityCourse/Hacking%20Lab/Lab_Virtual_Machines/">
      
      
        <link rel="prev" href="../Lab_Hacking_Metasploitable/">
      
      
        <link rel="next" href="../Vulnerable%20Platforms/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.5">
    
    
      
        <title>Metasploitable3 Hacking Lab - Installation - Cybersecurity Course - University of Trieste</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7a7fce14.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-7FK5GG9NWX"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-7FK5GG9NWX",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-7FK5GG9NWX",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="orange" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#metasploitable3-hacking-lab-installation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://bartoli.inginf.units.it" title="Cybersecurity Course - University of Trieste" class="md-header__button md-logo" aria-label="Cybersecurity Course - University of Trieste" data-md-component="logo">
      
  <img src="../../bernabeu small.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cybersecurity Course - University of Trieste
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Metasploitable3 Hacking Lab - Installation
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://bartoli.inginf.units.it" title="Cybersecurity Course - University of Trieste" class="md-nav__button md-logo" aria-label="Cybersecurity Course - University of Trieste" data-md-component="logo">
      
  <img src="../../bernabeu small.png" alt="logo">

    </a>
    Cybersecurity Course - University of Trieste
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Topics/" class="md-nav__link">
        Topics
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          1 - Hacking Lab
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          1 - Hacking Lab
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Lab_Hacking_Metasploitable/" class="md-nav__link">
        Metasploitable3 Hacking Lab
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Metasploitable3 Hacking Lab - Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Metasploitable3 Hacking Lab - Installation
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#attacked-machine-metasploitable3" class="md-nav__link">
    Attacked machine (Metasploitable3)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attacking-machine" class="md-nav__link">
    Attacking machine
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#virtualbox-configuration" class="md-nav__link">
    VirtualBox configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useful-links" class="md-nav__link">
    Useful links
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#virtualbox-in-a-nutshell" class="md-nav__link">
    VirtualBox in a nutshell
  </a>
  
    <nav class="md-nav" aria-label="VirtualBox in a nutshell">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#virtual-machines" class="md-nav__link">
    Virtual Machines
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networks-in-virtualbox" class="md-nav__link">
    Networks in VirtualBox
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#windows-setup-in-a-nutshell" class="md-nav__link">
    Windows setup in a nutshell
  </a>
  
    <nav class="md-nav" aria-label="Windows setup in a nutshell">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metasploitable3" class="md-nav__link">
    Metasploitable3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kali-linux" class="md-nav__link">
    Kali Linux
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vm-virtualbox-create-nat-network" class="md-nav__link">
    VM VirtualBox - Create NAT Network
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Vulnerable%20Platforms/" class="md-nav__link">
        Vulnerable Platforms
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          2 - Access Control
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          2 - Access Control
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Access%20Control/Resources%20-%20Access%20Control/" class="md-nav__link">
        Access Control - Resources
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          3 - MITRE ATT&CK
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          3 - MITRE ATT&CK
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../MITRE%20ATTACK/ATTACK%20-%20MITRE/" class="md-nav__link">
        MITRE ATT&CK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../MITRE%20ATTACK/ICS/" class="md-nav__link">
        ICS - Industrial Control Systems
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          4 - Malware
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          4 - Malware
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Malware/Execution%20and%20other%20tactics/" class="md-nav__link">
        Execution and Other Tactics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Malware/Initial%20Access%20Advanced/" class="md-nav__link">
        Initial Access - Advanced Techniques
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Malware/Initial%20Access/" class="md-nav__link">
        Initial Access
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Malware/Malware%20detection/" class="md-nav__link">
        Malware detection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Malware/Malware_Case_Studies/" class="md-nav__link">
        Intrusions and Malware - Case studies
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          5 - Passwords
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          5 - Passwords
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Passwords/Passwords/" class="md-nav__link">
        Passwords
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          6 - Authentication - NTLM Kerberos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          6 - Authentication - NTLM Kerberos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Authentication%20-%20NTLM%20Kerberos/Authentication%20-%20Windows/" class="md-nav__link">
        Authentication in Windows
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
      
      
      
        <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          7 - Lateral Movement
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          7 - Lateral Movement
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lateral%20Movement/AD%20Attack%20Paths/" class="md-nav__link">
        AD Attack Paths
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lateral%20Movement/AD%20Labs%20and%20Tools/" class="md-nav__link">
        AD Attack Examples and Tools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
      
      
      
        <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
          8 - MFA
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          8 - MFA
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../MFA/MFA/" class="md-nav__link">
        Multifactor Authentication (MFA)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
      
      
      
        <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
          9 - Memory Corruption
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          9 - Memory Corruption
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Memory%20Corruption/Memory%20Corruption%20-%20Case%20studies/" class="md-nav__link">
        Memory corruption - Case studies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Memory%20Corruption/Resources%20-%20Memory%20corruption_/" class="md-nav__link">
        Memory Corruption
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
      
      
      
        <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
          10 - Vulnerabilities
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          10 - Vulnerabilities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Vulnerabilities/Resources%20-%20Vulnerabilities%20Intro/" class="md-nav__link">
        Vulnerabilities Introduction - Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Vulnerabilities/Resources%20-%20Vulnerability%20Management/" class="md-nav__link">
        Vulnerability Management - Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Vulnerabilities/Vulnerability%20-%20Case%20studies/" class="md-nav__link">
        Vulnerabilities - Case Studies
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
      
      
      
        <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
          11 - Defense
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          11 - Defense
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Defense/Defense%20-%20Resources/" class="md-nav__link">
        Defense - Resources
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
      
      
      
        <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
          Labs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          Labs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Labs/Automated%20Malware%20Analysis/" class="md-nav__link">
        Automated Malware Analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Labs/BURP/" class="md-nav__link">
        BURP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Labs/MITRE_ATTACK_Navigator/" class="md-nav__link">
        MITRE ATT&CK NAVIGATOR.
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Labs/OWASP%20Juice%20Shop/" class="md-nav__link">
        OWASP Juice Shop
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../docsify/" class="md-nav__link">
        Report (Docsify-This)
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#attacked-machine-metasploitable3" class="md-nav__link">
    Attacked machine (Metasploitable3)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attacking-machine" class="md-nav__link">
    Attacking machine
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#virtualbox-configuration" class="md-nav__link">
    VirtualBox configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useful-links" class="md-nav__link">
    Useful links
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#virtualbox-in-a-nutshell" class="md-nav__link">
    VirtualBox in a nutshell
  </a>
  
    <nav class="md-nav" aria-label="VirtualBox in a nutshell">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#virtual-machines" class="md-nav__link">
    Virtual Machines
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networks-in-virtualbox" class="md-nav__link">
    Networks in VirtualBox
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#windows-setup-in-a-nutshell" class="md-nav__link">
    Windows setup in a nutshell
  </a>
  
    <nav class="md-nav" aria-label="Windows setup in a nutshell">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metasploitable3" class="md-nav__link">
    Metasploitable3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kali-linux" class="md-nav__link">
    Kali Linux
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vm-virtualbox-create-nat-network" class="md-nav__link">
    VM VirtualBox - Create NAT Network
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="metasploitable3-hacking-lab-installation">Metasploitable3 Hacking Lab - Installation</h1>
<p>A short but very useful guide to installing everything you need on Windows can be found in section <a href="#windows-setup-in-a-nutshell">Windows setup in a nutshell</a>.</p>
<h2 id="attacked-machine-metasploitable3">Attacked machine (Metasploitable3)</h2>
<p><a href="https://github.com/rapid7/metasploitable3">Metasploitable3</a> is a freely available virtual machine (VM) that contains a number of security vulnerabilities and has been designed for learning purposes. It comes in two flavors: Linux Ubuntu and Windows Server 2008.</p>
<p>This document assumes metasploitable3 Windows Server 2008, running on <a href="https://www.virtualbox.org/">VirtualBox</a>. In order to follow the exercises suggested in this document, there is no need to obtain the Linux Ubuntu version. </p>
<p>In order to create a metasploitable3 VM, one can either download a prebuilt image already configured for VirtualBox or construct one. Instructions can be found in <a href="https://github.com/rapid7/metasploitable3">this Github repository</a> and . </p>
<p>Downloading a prebuilt image configured for VirtualBox is simpler and quicker (“quick start” in the Github repo); however, in this case the Windows Server VM will warn that the 30 days evaluation period has elapsed and the Windows copy is not genuine.</p>
<h2 id="attacking-machine">Attacking machine</h2>
<p>This document assumes that the attacker uses Kali Linux. All the suggested attack tools are already installed in Kali.</p>
<p>Kali can be used in one of these ways:</p>
<ol>
<li><em>Native operating system</em>. This is the less hardware-demanding option. In this case the network configuration for the metasploitable3 VM is more complex (see below).</li>
<li><em>VM in VirtualBox</em>. This is the scenario used as a reference in this document.  Many websites describe how to install a Kali VM on VirtualBox (see also section <a href="#useful-links">Useful links</a> below).</li>
<li><em>VM in WSL2 (Windows subsystem for Linux)</em>. This is similar to 2 except that some of the suggested attack tools (e.g., metasploit, hashcat) will have to be installed separately, because the Kali distribution available for WSL2 is a minimal distribution.</li>
</ol>
<p><a href="https://www.parrotsec.org/">Parrot OS</a> is an alternative to Kali. It is a Linux distribution very similar to Kali that requires less memory and less secondary storage.</p>
<h2 id="virtualbox-configuration">VirtualBox configuration</h2>
<p>My suggested configuration is as follows:</p>
<ul>
<li>VirtualBox</li>
<li>Metasploitable3 Windows VM as attacked machine.</li>
<li>Kali (or Parrot OS) VM as attacker machine.</li>
</ul>
<p>Both VMs should be configured as “NAT network” and part of the same network. With this network configuration the VMs (guests) will be able to communicate between themselves. Their servers will not be reachable from the PC running VirtualBox (host) nor from the external network. The VMs will be able to access the host and the external network as clients.</p>
<p>Special cases:</p>
<ul>
<li>A better network configuration for the VMs would be “internal network” with both VMs connected to the same (internal) network. In this way, the VMs would be fully isolated from the host and from the external network. Configuring the metasploitable3 VM for this network configuration is more difficult, though, because the scripts available in the Github repository configure the VM for the “NAT network” case and would have to be modified (which is not straightforward).</li>
<li>If the attacker machine is not a VM running on VirtualBox (that is, options 1 or 3 above) the VirtualBox network configuration for metasploitable3 should enable “port forwarding”, to make their services visible to the attacker (i.e., to make the servers on the guest o.s. reachable from the host o.s.). There are many ports that will have to be enabled. To find the corresponding list, search for “metasploitable3 enumeration” or a similar term.</li>
</ul>
<h2 id="useful-links">Useful links</h2>
<ul>
<li>VirtualBox network configuration <a href="https://www.virtualbox.org/manual/ch06.html">manual</a>.</li>
<li>Guides and tutorials on VirtualBox network configuration: <a href="https://www.nakivo.com/blog/virtualbox-network-setting-guide/">one</a> and <a href="https://fabian-voith.de/2020/04/21/understanding-virtualbox-networking-schemes-to-set-up-a-good-and-safe-lab/">two</a>.</li>
<li><a href="./">Lab - Virtual Machines</a> on this website about VirtualBox and VirtualBox networking.</li>
<li><a href="https://www.nakivo.com/blog/how-to-install-kali-linux-on-virtualbox/">Installing Kali Linux on a VM on VirtualBox</a>.</li>
<li><a href="https://learn.microsoft.com/en-us/windows/wsl/setup/environment">WSL2 (Windows Linux Subsystem): best practice</a> and <a href="https://www.kali.org/docs/general-use/metapackages/">Kali Metapackages</a>.</li>
</ul>
<h2 id="virtualbox-in-a-nutshell">VirtualBox in a nutshell</h2>
<h3 id="virtual-machines">Virtual Machines</h3>
<p>A <em>virtual machine (VM)</em> is a computer emulated in software. This computer has a filesystem, RAM memory, keyboard, network interfaces and so on. All these resources are emulated in software by a dedicated program called <em>hypervisor</em>. The hypervisor runs on a (real) computer. <a href="https://www.virtualbox.org/">VirtualBox</a>, discussed in more detail below, is a freely available hypervisor that can run on Windows, Linux, MacOS.</p>
<p>A VM runs an operating system, like any other computer. Creation, bootstrap and shutdown of a VM is done through the hypervisor. </p>
<p>For example, you could run VirtualBox on Windows and then have a Linux VM running on that VirtualBox. You could have many VMs defined in VirtualBox and run them at different times. You may also run several VMs simultaneously, the performance being obviously limited by the hardware resources of the machine that runs the hypervisor.</p>
<p>Before creating a VM you need a file in ISO format containing the installation image of an operating system. This file must be stored on the machine where the hypervisor runs. The first time you launch the VM you install the operating system on that VM from this image.</p>
<p>While a VM is running, its screen will be shown in a window of the machine where the hypervisor runs. Upon a bootstrap, all the permanent state of the VM (files, configurations) will be the same as it was upon the last shutdown. </p>
<p>The filesystem of a VM, as well as any secondary storage required by its operating system, is stored on the filesystem of the machine that runs the hypervisor, in a (large) file managed by the hypervisor itself.</p>
<p>Resources of VMs are fully isolated from each other, like real machines. For example, a malware on a VM may encrypt the entire filesystem of that VM; it cannot operate on files of other VMs or on files of the machine that runs the hypervisor. The technical details for ensuring this isolation, implemented through the hypervisor, are very complex.</p>
<p>Each VM is called <em>guest</em>; the physical machine that runs the hypervisor is called <em>host</em>.</p>
<p><img alt="dca876c557b5b5ca32670650150bec31.png" src="../../_resources/dca876c557b5b5ca32670650150bec31-1.png" /></p>
<p><em>VirtualBox. Two VMs defined, both not running.</em></p>
<p><img alt="9526e92b81c3216a65eb71b63c3e1811.png" src="../../_resources/9526e92b81c3216a65eb71b63c3e1811-1.png" /></p>
<p><em>Two VMs running on a Windows PC. Kali VM on the left (desktop shows a shell window and a Wireshark window), Metasploitable3 Windows Server 2008 on the right (desktop shows a shell window and a file explorer window).</em></p>
<h3 id="networks-in-virtualbox">Networks in VirtualBox</h3>
<p>In VirtualBox each VM can have up to 4 <em>network interfaces</em>. Usually, each interface has a private IP address, dynamically allocated by a DHCP server implemented by VirtualBox.</p>
<p>The VMs defined in a given VirtualBox installation can be organized in many different networking architectures, by associating each network interface with one of the available <em>networking modes</em>. This operation is done through the “Network settings” of the VM.  Networking modes in VirtualBox are quite complex, we provide here only the background necessary for the  <a href="../Lab_Hacking_Metasploitable/">Hacking Lab</a>.</p>
<p>By default, a VM uses one network interface in “NAT mode” (this configuration is described at the end of this section).</p>
<p>The default configuration is <em>not</em> suggested for the <a href="../Lab_Hacking_Metasploitable/">Hacking Lab</a>.
The suggested configuration is:</p>
<ul>
<li>network interface of each VM in “NAT network mode”;</li>
<li>one "NAT network" defined in VirtualBox (VirtualBox requires each such network to have a name; I have used "NATNetwork" in the screenshot below);</li>
<li>both VMs connected to that network (see next image).</li>
</ul>
<p><img alt="3b74ad605dd5cf3c5fc99d5f18320178.png" src="../../_resources/3b74ad605dd5cf3c5fc99d5f18320178-1.png" /></p>
<p><em>Network settings of the Kali VM. Those of the metasploitable3 VM are identical.</em></p>
<p>With this configuration, </p>
<ul>
<li>Each VM has client access to the host <em>and</em> to the external network, through a NAT module implemented by VirtualBox.</li>
<li>VMs <em>can</em> communicate between themselves.</li>
</ul>
<p><img alt="b2b3102d2063f038d51af66ac3cff2d1.png" src="../../_resources/b2b3102d2063f038d51af66ac3cff2d1-1.png" /></p>
<p><em>NAT network (two VMs connected to the same network).</em></p>
<p>With the default network configuration (<em>not</em> suggested), each VM is in "NAT mode". In this way VMs <em>cannot</em> communicate between themselves. Furthermore:</p>
<ul>
<li>All VMs are given the same IP address and the respective default gateways all have the same IP address.</li>
<li>Server access to a VM is possible only by enabling <em>port forwarding</em> in the NAT module of VirtualBox. Port forwarding defines whether a given port number is managed by the host or by one of the VMs. Port forwarding is defined in the network settings of each VM rather than globally. If a given port number is forwarded to multiple VMs then malfunctioning will occur (usually the traffic will reach only the VM that starts first).</li>
</ul>
<p><img alt="33d6f3360a4f495f2aedbf05bdc8c751.png" src="../../_resources/33d6f3360a4f495f2aedbf05bdc8c751-1.png" /></p>
<p><em>NAT mode (default).</em>  </p>
<h2 id="windows-setup-in-a-nutshell">Windows setup in a nutshell</h2>
<p>(Courtesy of Mauro Farina)</p>
<h3 id="metasploitable3">Metasploitable3</h3>
<ol>
<li>Download and install Vagrant: <a href="https://developer.hashicorp.com/vagrant/docs/installation">https://developer.hashicorp.com/vagrant/docs/installation</a><ol>
<li>260 MB download</li>
</ol>
</li>
<li>
<p>Once installed:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Windows</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>mkdir<span class="w"> </span>metasploitable3-workspace
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nb">cd</span><span class="w"> </span>metasploitable3-workspace
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>Invoke-WebRequest<span class="w"> </span>-Uri<span class="w"> </span><span class="s2">&quot;https://raw.githubusercontent.com/rapid7/metasploitable3/master/Vagrantfile&quot;</span><span class="w"> </span>-OutFile<span class="w"> </span><span class="s2">&quot;Vagrantfile&quot;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="c1"># Linux</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>mkdir<span class="w"> </span>metasploitable3-workspace
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="nb">cd</span><span class="w"> </span>metasploitable3-workspace
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>curl<span class="w"> </span>-O<span class="w"> </span>https://raw.githubusercontent.com/rapid7/metasploitable3/master/Vagrantfile
</span></code></pre></div>
</li>
<li>
<p>To create the Metasploitable Windows Server VM, run</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>vagrant<span class="w"> </span>up<span class="w"> </span>win2k8
</span></code></pre></div>
</li>
<li>
<p>Once that’s done, you should see a metasploitable3 VM within Oracle VM VirtualBox</p>
</li>
<li>Windows Server VM username/pwd: vagrant/vagrant</li>
</ol>
<h3 id="kali-linux">Kali Linux</h3>
<ol>
<li>Download Kali Linux VM image <a href="https://www.kali.org/get-kali/#kali-virtual-machines">https://www.kali.org/get-kali/#kali-virtual-machines</a><ol>
<li>3 GB download</li>
</ol>
</li>
<li>Extract files<ol>
<li>might take a couple of minutes</li>
</ol>
</li>
<li>Move folder to <code>C:/users/YOUR_NAME/VirtualBox VMs</code></li>
<li>From <strong>Oracle VM VirtualBox</strong>: Add → kali-linux-folder → file <em>.vbox</em></li>
<li>Kali Linux VM user/pwd: kali/kali</li>
</ol>
<h3 id="vm-virtualbox-create-nat-network">VM VirtualBox - Create NAT Network</h3>
<ol>
<li>File → Tools → Network Manager</li>
<li>NAT Networks</li>
<li>Create</li>
</ol>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["search.suggest", "search.highlight", "navigation.instant", "navigation.tracking"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.407015b8.min.js"></script>
      
    
  </body>
</html>